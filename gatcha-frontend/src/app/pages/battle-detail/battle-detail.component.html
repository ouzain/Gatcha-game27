<div class="battle-detail-container">
    <div *ngIf="isLoading" class="text-center">
      <p>Loading battle replay...</p>
    </div>
    
    <div *ngIf="!isLoading && battle" class="battle-detail">
      <div class="card battle-info-card">
        <h2 class="text-center">Battle Replay</h2>
        
        <div class="battle-header">
          <div class="battle-monsters">
            <div class="monster-card" *ngIf="battle.monster1" [ngClass]="battle.monster1.elementType">
              <h3>{{ battle.monster1.name }}</h3>
              <div class="monster-type">{{ battle.monster1.elementType | titlecase }}</div>
              <div class="monster-level">Level {{ battle.monster1.level }}</div>
              <div class="monster-stats">
                <div class="stat">HP: {{ battle.monster1.hp }}</div>
                <div class="stat">ATK: {{ battle.monster1.atk }}</div>
                <div class="stat">DEF: {{ battle.monster1.def }}</div>
                <div class="stat">VIT: {{ battle.monster1.vit }}</div>
              </div>
            </div>
            
            <div class="vs-container">
              <div class="vs">VS</div>
            </div>
            
            <div class="monster-card" *ngIf="battle.monster2" [ngClass]="battle.monster2.elementType">
              <h3>{{ battle.monster2.name }}</h3>
              <div class="monster-type">{{ battle.monster2.elementType | titlecase }}</div>
              <div class="monster-level">Level {{ battle.monster2.level }}</div>
              <div class="monster-stats">
                <div class="stat">HP: {{ battle.monster2.hp }}</div>
                <div class="stat">ATK: {{ battle.monster2.atk }}</div>
                <div class="stat">DEF: {{ battle.monster2.def }}</div>
                <div class="stat">VIT: {{ battle.monster2.vit }}</div>
              </div>
            </div>
          </div>
          
          <div class="battle-result">
            <div class="winner">
              <span class="winner-label">Winner:</span>
              <span class="winner-name" *ngIf="battle.winner" [ngClass]="battle.winner.elementType">
                {{ battle.winner.name }}
              </span>
            </div>
            <div class="battle-date">{{ battle.date | date:'medium' }}</div>
          </div>
        </div>
        
        <div class="battle-actions">
          <button class="btn" (click)="replayBattle()" [disabled]="isReplaying">
            {{ isReplaying ? 'Replaying...' : 'Replay Battle' }}
          </button>
        </div>
      </div>
      
      <div class="card battle-log-card">
        <h3 class="text-center">Battle Log</h3>
        
        <div class="battle-log">
          <div *ngFor="let action of battle.actions" class="log-entry">
            <div class="turn-number">Turn {{ action.turn }}</div>
            <div class="action-description">
            <span class="monster-name" [ngClass]="getMonsterElement(action.monsterId)">
              {{ getMonsterName(action.monsterId) }}
            </span>


              used 
              <span class="skill-name">{{ getSkillName(action.monsterId, action.skillId) }}</span>
              and dealt 
              <span class="damage">{{ action.damage }}</span> 
              damage.
              <span class="target-hp">
                Target HP: {{ action.targetHp }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div *ngIf="errorMessage" class="error-message text-center mt-3">
      {{ errorMessage }}
    </div>
    
    <div class="back-link">
      <a routerLink="/battles" class="btn btn-secondary">Back to Battles</a>
    </div>
  </div>