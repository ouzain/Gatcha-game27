import{a as E,b as u,c as b,d as I,e as M,f as R,g as F,k as L,l as T}from"./chunk-YXDBG4CB.js";import{a as S}from"./chunk-OS54V6FA.js";import"./chunk-AUALO7ST.js";import{A as s,B as p,E as w,I as m,K as a,M as c,N as t,O as n,P as f,R as _,S as g,T as o,V as v,ga as h,ka as P,ta as y,ua as C}from"./chunk-SP6T3Q2V.js";function q(r,d){r&1&&(t(0,"div"),o(1,"Le username est requis"),n())}function N(r,d){r&1&&(t(0,"div"),o(1,"Username doit comporter au moins 3 caract\xE8res"),n())}function V(r,d){if(r&1&&(t(0,"div",16),m(1,q,2,0,"div",17)(2,N,2,0,"div",17),n()),r&2){let i=g();s(),a("ngIf",i.username==null||i.username.errors==null?null:i.username.errors.required),s(),a("ngIf",i.username==null||i.username.errors==null?null:i.username.errors.minlength)}}function j(r,d){r&1&&(t(0,"div"),o(1,"Mot de passe requis"),n())}function D(r,d){r&1&&(t(0,"div"),o(1,"Le mot de passe doit comporter au moins 6 caract\xE8res"),n())}function G(r,d){if(r&1&&(t(0,"div",16),m(1,j,2,0,"div",17)(2,D,2,0,"div",17),n()),r&2){let i=g();s(),a("ngIf",i.password==null||i.password.errors==null?null:i.password.errors.required),s(),a("ngIf",i.password==null||i.password.errors==null?null:i.password.errors.minlength)}}function O(r,d){r&1&&(t(0,"div"),o(1,"La confirmation du mot de passe est requise"),n())}function z(r,d){if(r&1&&(t(0,"div",16),m(1,O,2,0,"div",17),n()),r&2){let i=g();s(),a("ngIf",i.confirmPassword==null||i.confirmPassword.errors==null?null:i.confirmPassword.errors.required)}}function k(r,d){r&1&&(t(0,"div",16),o(1," Les mots de passe ne correspondent pas "),n())}function A(r,d){r&1&&(t(0,"div",18),o(1),n()),r&2&&(s(),v(" ","Erreur lors de l'enregistrement, ouvrez les DevTools pour voir l'erreur "," "))}var Z=(()=>{class r{constructor(i,l,e){this.fb=i,this.authService=l,this.router=e,this.isLoading=!1,this.errorMessage="",this.registerForm=this.fb.group({username:["",[u.required,u.minLength(3)]],password:["",[u.required,u.minLength(6)]],confirmPassword:["",u.required]},{validators:this.passwordMatchValidator})}get username(){return this.registerForm.get("username")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}passwordMatchValidator(i){let l=i.get("password")?.value,e=i.get("confirmPassword")?.value;return l===e?null:{passwordMismatch:!0}}onSubmit(){if(this.registerForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{username:i,password:l}=this.registerForm.value;this.authService.register(i,l).subscribe({next:()=>{this.router.navigate(["/profile"],{queryParams:{username:i}})},error:e=>{this.errorMessage=e.message||"\xC9chec de l'inscription. Veuillez r\xE9essayer",this.isLoading=!1,console.error("Erreur lors de l'enregistrement:",e)}})}static{this.\u0275fac=function(l){return new(l||r)(p(L),p(S),p(y))}}static{this.\u0275cmp=w({type:r,selectors:[["app-register"]],decls:28,vars:14,consts:[[1,"register-container"],[1,"card","register-card"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],["class","error-message mb-3",4,"ngIf"],["type","submit",1,"btn","w-100",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/login"],[1,"error-message"],[4,"ngIf"],[1,"error-message","mb-3"]],template:function(l,e){l&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"S'enregistrer"),n(),t(4,"form",3),_("ngSubmit",function(){return e.onSubmit()}),t(5,"div",4)(6,"label",5),o(7,"Username"),n(),f(8,"input",6),m(9,V,3,2,"div",7),n(),t(10,"div",4)(11,"label",8),o(12,"Mot de passe"),n(),f(13,"input",9),m(14,G,3,2,"div",7),n(),t(15,"div",4)(16,"label",10),o(17,"Confirmer le mot de passe"),n(),f(18,"input",11),m(19,z,2,1,"div",7)(20,k,2,0,"div",7),n(),m(21,A,2,1,"div",12),t(22,"button",13),o(23),n()(),t(24,"p",14),o(25," Vous avez d\xE9j\xE0 un compte ? "),t(26,"a",15),o(27,"Se connecter"),n()()()()),l&2&&(s(4),a("formGroup",e.registerForm),s(4),c("is-invalid",(e.username==null?null:e.username.invalid)&&((e.username==null?null:e.username.dirty)||(e.username==null?null:e.username.touched))),s(),a("ngIf",(e.username==null?null:e.username.invalid)&&((e.username==null?null:e.username.dirty)||(e.username==null?null:e.username.touched))),s(4),c("is-invalid",(e.password==null?null:e.password.invalid)&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.touched))),s(),a("ngIf",(e.password==null?null:e.password.invalid)&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.touched))),s(4),c("is-invalid",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&((e.confirmPassword==null?null:e.confirmPassword.dirty)||(e.confirmPassword==null?null:e.confirmPassword.touched))||(e.registerForm.errors==null?null:e.registerForm.errors.passwordMismatch)),s(),a("ngIf",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&((e.confirmPassword==null?null:e.confirmPassword.dirty)||(e.confirmPassword==null?null:e.confirmPassword.touched))),s(),a("ngIf",e.registerForm.errors==null?null:e.registerForm.errors.passwordMismatch),s(),a("ngIf",e.errorMessage),s(),a("disabled",e.registerForm.invalid||e.isLoading),s(),v(" ",e.isLoading?"Registering...":"Register"," "))},dependencies:[P,h,T,M,E,b,I,R,F,C],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh}.register-card[_ngcontent-%COMP%]{width:100%;max-width:400px}.w-100[_ngcontent-%COMP%]{width:100%}.is-invalid[_ngcontent-%COMP%]{border-color:var(--error-color)}"]})}}return r})();export{Z as RegisterComponent};
