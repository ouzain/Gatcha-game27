import{a as T}from"./chunk-XX22AALN.js";import"./chunk-AUALO7ST.js";import{$ as b,A as e,B as x,E as C,I as g,K as d,N as n,O as i,Q as u,R as M,S as s,T as a,U as m,V as o,_ as v,aa as y,ea as h,fa as I,ga as P,ia as O,ja as w,ka as S,ra as E,ua as B,v as f,w as _,xa as k}from"./chunk-SP6T3Q2V.js";function D(r,c){r&1&&(n(0,"div",6)(1,"p"),a(2,"Loading battle replay..."),i()())}function L(r,c){if(r&1&&(n(0,"div",24)(1,"h3"),a(2),i(),n(3,"div",25),a(4),v(5,"titlecase"),i(),n(6,"div",26),a(7),i(),n(8,"div",27)(9,"div",28),a(10),i(),n(11,"div",28),a(12),i(),n(13,"div",28),a(14),i(),n(15,"div",28),a(16),i()()()),r&2){let t=s(2);d("ngClass",t.battle.monster1.elementType),e(2),m(t.battle.monster1.name),e(2),m(b(5,8,t.battle.monster1.elementType)),e(3),o("Level ",t.battle.monster1.level,""),e(3),o("HP: ",t.battle.monster1.hp,""),e(2),o("ATK: ",t.battle.monster1.atk,""),e(2),o("DEF: ",t.battle.monster1.def,""),e(2),o("VIT: ",t.battle.monster1.vit,"")}}function R(r,c){if(r&1&&(n(0,"div",24)(1,"h3"),a(2),i(),n(3,"div",25),a(4),v(5,"titlecase"),i(),n(6,"div",26),a(7),i(),n(8,"div",27)(9,"div",28),a(10),i(),n(11,"div",28),a(12),i(),n(13,"div",28),a(14),i(),n(15,"div",28),a(16),i()()()),r&2){let t=s(2);d("ngClass",t.battle.monster2.elementType),e(2),m(t.battle.monster2.name),e(2),m(b(5,8,t.battle.monster2.elementType)),e(3),o("Level ",t.battle.monster2.level,""),e(3),o("HP: ",t.battle.monster2.hp,""),e(2),o("ATK: ",t.battle.monster2.atk,""),e(2),o("DEF: ",t.battle.monster2.def,""),e(2),o("VIT: ",t.battle.monster2.vit,"")}}function F(r,c){if(r&1&&(n(0,"span",29),a(1),i()),r&2){let t=s(2);d("ngClass",t.battle.winner.elementType),e(),o(" ",t.battle.winner.name," ")}}function N(r,c){if(r&1&&(n(0,"div",30)(1,"div",31),a(2),i(),n(3,"div",32)(4,"span",33),a(5),i(),a(6," used "),n(7,"span",34),a(8),i(),a(9," and dealt "),n(10,"span",35),a(11),i(),a(12," damage. "),n(13,"span",36),a(14),i()()()),r&2){let t=c.$implicit,l=s(2);e(2),o("Turn ",t.turn,""),e(2),d("ngClass",l.getMonsterElement(t.monsterId)),e(),o(" ",l.getMonsterName(t.monsterId)," "),e(3),m(l.getSkillName(t.monsterId,t.skillId)),e(3),m(t.damage),e(3),o(" Target HP: ",t.targetHp," ")}}function V(r,c){if(r&1){let t=u();n(0,"div",7)(1,"div",8)(2,"h2",6),a(3,"Battle Replay"),i(),n(4,"div",9)(5,"div",10),g(6,L,17,10,"div",11),n(7,"div",12)(8,"div",13),a(9,"VS"),i()(),g(10,R,17,10,"div",11),i(),n(11,"div",14)(12,"div",15)(13,"span",16),a(14,"Winner:"),i(),g(15,F,2,2,"span",17),i(),n(16,"div",18),a(17),v(18,"date"),i()()(),n(19,"div",19)(20,"button",20),M("click",function(){f(t);let p=s();return _(p.replayBattle())}),a(21),i()()(),n(22,"div",21)(23,"h3",6),a(24,"Battle Log"),i(),n(25,"div",22),g(26,N,15,6,"div",23),i()()()}if(r&2){let t=s();e(6),d("ngIf",t.battle.monster1),e(4),d("ngIf",t.battle.monster2),e(5),d("ngIf",t.battle.winner),e(2),m(y(18,7,t.battle.date,"medium")),e(3),d("disabled",t.isReplaying),e(),o(" ",t.isReplaying?"Replaying...":"Replay Battle"," "),e(5),d("ngForOf",t.battle.actions)}}function z(r,c){if(r&1&&(n(0,"div",37),a(1),i()),r&2){let t=s();e(),o(" ",t.errorMessage," ")}}var q=(()=>{class r{constructor(t,l){this.route=t,this.battleService=l,this.battle=null,this.isLoading=!0,this.isReplaying=!1,this.errorMessage=""}ngOnInit(){this.loadBattle()}loadBattle(){let t=this.route.snapshot.paramMap.get("id");if(!t){this.errorMessage="Battle ID not found",this.isLoading=!1;return}this.battleService.getBattle(t).subscribe({next:l=>{this.battle=l,this.isLoading=!1},error:l=>{this.errorMessage="Failed to load battle details. Please try again.",this.isLoading=!1,console.error("Error loading battle:",l)}})}replayBattle(){this.battle&&(this.isReplaying=!0,this.battleService.replayBattle(this.battle.id).subscribe({next:t=>{this.battle=t,this.isReplaying=!1},error:t=>{this.errorMessage="Failed to replay battle. Please try again.",this.isReplaying=!1,console.error("Error replaying battle:",t)}}))}getMonsterName(t){return""}getMonsterElement(t){return""}getSkillName(t,l){return""}static{this.\u0275fac=function(l){return new(l||r)(x(E),x(T))}}static{this.\u0275cmp=C({type:r,selectors:[["app-battle-detail"]],decls:7,vars:3,consts:[[1,"battle-detail-container"],["class","text-center",4,"ngIf"],["class","battle-detail",4,"ngIf"],["class","error-message text-center mt-3",4,"ngIf"],[1,"back-link"],["routerLink","/battles",1,"btn","btn-secondary"],[1,"text-center"],[1,"battle-detail"],[1,"card","battle-info-card"],[1,"battle-header"],[1,"battle-monsters"],["class","monster-card",3,"ngClass",4,"ngIf"],[1,"vs-container"],[1,"vs"],[1,"battle-result"],[1,"winner"],[1,"winner-label"],["class","winner-name",3,"ngClass",4,"ngIf"],[1,"battle-date"],[1,"battle-actions"],[1,"btn",3,"click","disabled"],[1,"card","battle-log-card"],[1,"battle-log"],["class","log-entry",4,"ngFor","ngForOf"],[1,"monster-card",3,"ngClass"],[1,"monster-type"],[1,"monster-level"],[1,"monster-stats"],[1,"stat"],[1,"winner-name",3,"ngClass"],[1,"log-entry"],[1,"turn-number"],[1,"action-description"],[1,"monster-name",3,"ngClass"],[1,"skill-name"],[1,"damage"],[1,"target-hp"],[1,"error-message","text-center","mt-3"]],template:function(l,p){l&1&&(n(0,"div",0),g(1,D,3,0,"div",1)(2,V,27,10,"div",2)(3,z,2,1,"div",3),n(4,"div",4)(5,"a",5),a(6,"Back to Battles"),i()()()),l&2&&(e(),d("ngIf",p.isLoading),e(),d("ngIf",!p.isLoading&&p.battle),e(),d("ngIf",p.errorMessage))},dependencies:[S,h,I,P,O,w,B,k],styles:[".battle-detail-container[_ngcontent-%COMP%]{padding:20px 0}.battle-detail[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:20px}@media (min-width: 768px){.battle-detail[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.battle-header[_ngcontent-%COMP%]{margin-bottom:20px}.battle-monsters[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.monster-card[_ngcontent-%COMP%]{flex:1;padding:15px;border-radius:4px;text-align:center}.monster-card.fire[_ngcontent-%COMP%]{background-color:#ff57221a;border:1px solid var(--fire-color)}.monster-card.water[_ngcontent-%COMP%]{background-color:#2196f31a;border:1px solid var(--water-color)}.monster-card.wind[_ngcontent-%COMP%]{background-color:#4caf501a;border:1px solid var(--wind-color)}.monster-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.monster-type[_ngcontent-%COMP%]{font-weight:600;margin-bottom:5px}.monster-type.fire[_ngcontent-%COMP%]{color:var(--fire-color)}.monster-type.water[_ngcontent-%COMP%]{color:var(--water-color)}.monster-type.wind[_ngcontent-%COMP%]{color:var(--wind-color)}.monster-level[_ngcontent-%COMP%]{margin-bottom:10px}.monster-stats[_ngcontent-%COMP%]{text-align:left}.stat[_ngcontent-%COMP%]{margin-bottom:5px}.vs-container[_ngcontent-%COMP%]{padding:0 15px}.vs[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--secondary-color)}.battle-result[_ngcontent-%COMP%]{text-align:center;padding:15px;background-color:#ffffff0d;border-radius:4px}.winner[_ngcontent-%COMP%]{margin-bottom:10px}.winner-label[_ngcontent-%COMP%]{font-size:1.1rem;margin-right:10px}.winner-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.winner-name.fire[_ngcontent-%COMP%]{color:var(--fire-color)}.winner-name.water[_ngcontent-%COMP%]{color:var(--water-color)}.winner-name.wind[_ngcontent-%COMP%]{color:var(--wind-color)}.battle-date[_ngcontent-%COMP%]{font-size:.9rem;color:#aaa}.battle-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.battle-log[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;padding:10px;background-color:#0003;border-radius:4px}.log-entry[_ngcontent-%COMP%]{margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #333}.log-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.turn-number[_ngcontent-%COMP%]{font-weight:600;margin-bottom:5px;color:var(--secondary-color)}.action-description[_ngcontent-%COMP%]{line-height:1.5}.monster-name[_ngcontent-%COMP%]{font-weight:600}.monster-name.fire[_ngcontent-%COMP%]{color:var(--fire-color)}.monster-name.water[_ngcontent-%COMP%]{color:var(--water-color)}.monster-name.wind[_ngcontent-%COMP%]{color:var(--wind-color)}.skill-name[_ngcontent-%COMP%]{font-style:italic}.damage[_ngcontent-%COMP%]{font-weight:600;color:var(--error-color)}.target-hp[_ngcontent-%COMP%]{display:block;font-size:.9rem;margin-top:5px;color:#aaa}.back-link[_ngcontent-%COMP%]{margin-top:20px;text-align:center}"]})}}return r})();export{q as BattleDetailComponent};
