import{a as V}from"./chunk-5NYNIZ4Q.js";import{a as U}from"./chunk-PQSCT4QP.js";import"./chunk-AUALO7ST.js";import{$ as P,A as i,B as v,E as M,I as b,K as l,L as C,N as t,O as n,P as E,Q as h,R as f,S as d,T as r,U as m,V as c,W as _,_ as k,ea as S,fa as y,ga as O,ia as w,ka as I,ra as T,ta as D,ua as L,v as g,w as x}from"./chunk-SP6T3Q2V.js";function F(a,u){a&1&&(t(0,"div",6)(1,"p"),r(2,"Chargement des d\xE9tails du monstre..."),n()())}function R(a,u){if(a&1){let e=h();t(0,"div",30)(1,"div",31)(2,"span",32),r(3),n()(),t(4,"div",33)(5,"div",34)(6,"span",35),r(7,"D\xE9g\xE2ts de base :"),n(),t(8,"span",36),r(9),n()(),t(10,"div",34)(11,"span",35),r(12,"Ratio :"),n(),t(13,"span",36),r(14),n()(),t(15,"div",34)(16,"span",35),r(17,"Temps de recharge :"),n(),t(18,"span",36),r(19),n()()(),t(20,"button",37),f("click",function(){let s=g(e).$implicit,p=d(2);return x(p.upgradeSkill(s))}),r(21),n()()}if(a&2){let e=u.$implicit,o=d(2);i(3),_("Niv. ",e.level,"/",e.lvlMax,""),i(6),m(e.dmg),i(5),_("",e.ratio.percent,"x ",e.ratio.stat,""),i(5),c("",e.cooldown," tours"),i(),l("disabled",o.isUpgradingSkill||e.level>=e.lvlMax),i(),c(" ",o.isUpgradingSkill?"Am\xE9lioration...":"Am\xE9liorer la comp\xE9tence"," ")}}function j(a,u){if(a&1){let e=h();t(0,"div",7)(1,"div",8)(2,"div",9)(3,"span",10),r(4),k(5,"titlecase"),n()(),t(6,"div",11)(7,"div",12)(8,"span",13),r(9),n()(),t(10,"div",14)(11,"div",15),E(12,"div",16),n(),t(13,"div",17),r(14),n()()(),t(15,"div",18)(16,"div",19)(17,"div",20)(18,"span",21),r(19,"PV"),n(),t(20,"span",22),r(21),n()(),t(22,"div",20)(23,"span",21),r(24,"ATK"),n(),t(25,"span",22),r(26),n()()(),t(27,"div",19)(28,"div",20)(29,"span",21),r(30,"DEF"),n(),t(31,"span",22),r(32),n()(),t(33,"div",20)(34,"span",21),r(35,"VIT"),n(),t(36,"span",22),r(37),n()()()(),t(38,"div",23)(39,"button",24),f("click",function(){g(e);let s=d();return x(s.gainExperience())}),r(40),n(),t(41,"button",25),f("click",function(){g(e);let s=d();return x(s.levelUp())}),r(42),n(),t(43,"button",26),f("click",function(){g(e);let s=d();return x(s.releaseMonster())}),r(44),n()()(),t(45,"div",27)(46,"h3"),r(47,"Comp\xE9tences"),n(),t(48,"div",28),b(49,R,22,8,"div",29),n()()()}if(a&2){let e=d();i(2),l("ngClass",e.monster.elementType),i(2),m(P(5,18,e.monster.elementType)),i(5),c("Niveau ",e.monster.level,""),i(3),C("width",e.monster.experience/e.monster.maxExperience*100,"%"),i(2),_(" ",e.monster.experience," / ",e.monster.maxExperience," XP "),i(7),m(e.monster.hp),i(5),m(e.monster.atk),i(6),m(e.monster.def),i(5),m(e.monster.vit),i(2),l("disabled",e.isGainingExp),i(),c(" ",e.isGainingExp?"En entra\xEEnement...":"Entra\xEEnement (+XP)"," "),i(),l("disabled",e.isLevelingUp||e.monster.experience<e.monster.maxExperience),i(),c(" ",e.isLevelingUp?"Mont\xE9e en niveau...":"Monter de niveau"," "),i(),l("disabled",e.isReleasing),i(),c(" ",e.isReleasing?"En lib\xE9ration...":"Lib\xE9rer le monstre"," "),i(5),l("ngForOf",e.monster.skills)}}function z(a,u){if(a&1&&(t(0,"div",38),r(1),n()),a&2){let e=d();i(),c(" ",e.errorMessage," ")}}var q=(()=>{class a{constructor(e,o,s,p){this.route=e,this.router=o,this.monsterService=s,this.playerService=p,this.monster=null,this.isLoading=!0,this.isGainingExp=!1,this.isLevelingUp=!1,this.isUpgradingSkill=!1,this.isReleasing=!1,this.errorMessage=""}ngOnInit(){this.loadMonster()}loadMonster(){let e=this.route.snapshot.paramMap.get("id");if(!e){this.errorMessage="Monster ID not found",this.isLoading=!1;return}this.monsterService.getMonster(Number(e)).subscribe({next:o=>{this.monster=o,this.isLoading=!1},error:o=>{this.errorMessage="Failed to load monster details. Please try again.",this.isLoading=!1,console.error("Error loading monster:",o)}})}gainExperience(){if(!this.monster)return;this.isGainingExp=!0;let e=Math.floor(Math.random()*21)+10;this.monsterService.gainExperience(this.monster.id,e).subscribe({next:o=>{this.monster=o,this.isGainingExp=!1},error:o=>{this.errorMessage="Failed to train monster. Please try again.",this.isGainingExp=!1,console.error("Error gaining experience:",o)}})}levelUp(){!this.monster||this.monster.experience<this.monster.maxExperience||(this.isLevelingUp=!0,this.monsterService.levelUp(this.monster.id).subscribe({next:e=>{this.monster=e,this.isLevelingUp=!1},error:e=>{this.errorMessage="Failed to level up monster. Please try again.",this.isLevelingUp=!1,console.error("Error leveling up:",e)}}))}upgradeSkill(e){!this.monster||e.level>=e.lvlMax||(this.isUpgradingSkill=!0,this.monsterService.upgradeSkill(this.monster.id,e.num).subscribe({next:o=>{if(this.monster){let s=this.monster.skills.findIndex(p=>p.num===o.num);s!==-1&&(this.monster.skills[s]=o)}this.isUpgradingSkill=!1},error:o=>{this.errorMessage="Failed to upgrade skill. Please try again.",this.isUpgradingSkill=!1,console.error("Error upgrading skill:",o)}}))}releaseMonster(){this.monster&&confirm(`Are you sure you want to release ${this.monster.name}? This action cannot be undone.`)&&(this.isReleasing=!0,this.playerService.removeMonster(this.monster.id).subscribe({next:()=>{this.isReleasing=!1,this.router.navigate(["/monsters"])},error:e=>{this.errorMessage="Failed to release monster. Please try again.",this.isReleasing=!1,console.error("Error releasing monster:",e)}}))}static{this.\u0275fac=function(o){return new(o||a)(v(T),v(D),v(V),v(U))}}static{this.\u0275cmp=M({type:a,selectors:[["app-monster-detail"]],decls:7,vars:3,consts:[[1,"monster-detail-container"],["class","text-center",4,"ngIf"],["class","monster-detail",4,"ngIf"],["class","error-message text-center mt-3",4,"ngIf"],[1,"back-link"],["routerLink","/monsters",1,"btn","btn-secondary"],[1,"text-center"],[1,"monster-detail"],[1,"card","monster-info"],[1,"monster-header",3,"ngClass"],[1,"element-badge"],[1,"monster-level-info"],[1,"level-display"],[1,"level-label"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"monster-stats"],[1,"stat-group"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"monster-actions"],[1,"btn",3,"click","disabled"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-danger",3,"click","disabled"],[1,"card","skills-card"],[1,"skills-list"],["class","skill-item",4,"ngFor","ngForOf"],[1,"skill-item"],[1,"skill-header"],[1,"skill-level"],[1,"skill-details"],[1,"skill-stat"],[1,"skill-label"],[1,"skill-value"],[1,"btn","skill-upgrade-btn",3,"click","disabled"],[1,"error-message","text-center","mt-3"]],template:function(o,s){o&1&&(t(0,"div",0),b(1,F,3,0,"div",1)(2,j,50,20,"div",2)(3,z,2,1,"div",3),t(4,"div",4)(5,"a",5),r(6,"Retour aux monstres"),n()()()),o&2&&(i(),l("ngIf",s.isLoading),i(),l("ngIf",!s.isLoading&&s.monster),i(),l("ngIf",s.errorMessage))},dependencies:[I,S,y,O,w,L],styles:[".monster-detail-container[_ngcontent-%COMP%]{padding:20px 0}.monster-detail[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:20px}@media (min-width: 768px){.monster-detail[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.monster-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:15px;margin-bottom:20px;border-bottom:2px solid #333}.monster-header.fire[_ngcontent-%COMP%]{border-color:var(--fire-color)}.monster-header.water[_ngcontent-%COMP%]{border-color:var(--water-color)}.monster-header.wind[_ngcontent-%COMP%]{border-color:var(--wind-color)}.element-badge[_ngcontent-%COMP%]{padding:5px 10px;border-radius:4px;font-size:.9rem;font-weight:600}.fire[_ngcontent-%COMP%]   .element-badge[_ngcontent-%COMP%]{background-color:#ff572233;color:var(--fire-color)}.water[_ngcontent-%COMP%]   .element-badge[_ngcontent-%COMP%]{background-color:#2196f333;color:var(--water-color)}.wind[_ngcontent-%COMP%]   .element-badge[_ngcontent-%COMP%]{background-color:#4caf5033;color:var(--wind-color)}.monster-level-info[_ngcontent-%COMP%]{margin-bottom:20px}.level-display[_ngcontent-%COMP%]{margin-bottom:10px}.level-label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.progress-container[_ngcontent-%COMP%]{margin-bottom:15px}.progress-bar[_ngcontent-%COMP%]{height:15px;background-color:#333;border-radius:10px;overflow:hidden;margin-bottom:5px}.progress-fill[_ngcontent-%COMP%]{height:100%;background-color:var(--primary-color);transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{font-size:.9rem;text-align:right}.monster-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px;background-color:#ffffff0d;border-radius:4px}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:5px}.stat-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.monster-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.skills-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px}.skills-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.skill-item[_ngcontent-%COMP%]{padding:15px;background-color:#ffffff0d;border-radius:4px}.skill-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.skill-level[_ngcontent-%COMP%]{font-size:.9rem;color:var(--secondary-color)}.skill-details[_ngcontent-%COMP%]{margin-bottom:15px}.skill-stat[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:5px}.skill-upgrade-btn[_ngcontent-%COMP%]{width:100%}.btn-danger[_ngcontent-%COMP%]{background-color:var(--error-color)}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b00020}.back-link[_ngcontent-%COMP%]{margin-top:20px;text-align:center}"]})}}return a})();export{q as MonsterDetailComponent};
