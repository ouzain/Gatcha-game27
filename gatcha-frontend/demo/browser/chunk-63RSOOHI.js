import{a as b,b as f,c as E,d as I,e as M,f as F,g as N,k as q,l as P}from"./chunk-YXDBG4CB.js";import{a as L}from"./chunk-PTW3EDK3.js";import"./chunk-AUALO7ST.js";import{A as o,B as u,E as h,I as m,K as l,M as p,N as t,O as r,P as g,R as _,S as c,T as s,V as v,ga as w,ka as S,ta as C,ua as y}from"./chunk-SP6T3Q2V.js";function T(i,d){i&1&&(t(0,"div"),s(1,"Le nom d'utilisateur est requis"),r())}function x(i,d){if(i&1&&(t(0,"div",14),m(1,T,2,0,"div",15),r()),i&2){let n=c();o(),l("ngIf",n.username==null||n.username.errors==null?null:n.username.errors.required)}}function V(i,d){i&1&&(t(0,"div"),s(1,"Le mot de passe est requis"),r())}function j(i,d){if(i&1&&(t(0,"div",14),m(1,V,2,0,"div",15),r()),i&2){let n=c();o(),l("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.required)}}function D(i,d){i&1&&(t(0,"div",16),s(1),r()),i&2&&(o(),v(" ","La connexion a \xE9chou\xE9. Veuillez v\xE9rifier vos informations de connexion."," "))}var K=(()=>{class i{constructor(n,a,e){this.fb=n,this.authService=a,this.router=e,this.isLoading=!1,this.errorMessage="",this.loginForm=this.fb.group({username:["",f.required],password:["",f.required]})}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{username:n,password:a}=this.loginForm.value;this.authService.login(n,a).subscribe({next:()=>{this.router.navigate(["/profile"],{queryParams:{username:n}})},error:e=>{this.errorMessage=e.message||"La connexion a \xE9chou\xE9. Merci de reessayer.",this.isLoading=!1,console.error("Login error:",e)}})}static{this.\u0275fac=function(a){return new(a||i)(u(q),u(L),u(C))}}static{this.\u0275cmp=h({type:i,selectors:[["app-login"]],decls:22,vars:10,consts:[[1,"login-container"],[1,"card","login-card"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["class","error-message mb-3",4,"ngIf"],["type","submit",1,"btn","w-100",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/register"],[1,"error-message"],[4,"ngIf"],[1,"error-message","mb-3"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Se connecter"),r(),t(4,"form",3),_("ngSubmit",function(){return e.onSubmit()}),t(5,"div",4)(6,"label",5),s(7,"Nom d'utilisateur"),r(),g(8,"input",6),m(9,x,2,1,"div",7),r(),t(10,"div",4)(11,"label",8),s(12,"Mot de passe"),r(),g(13,"input",9),m(14,j,2,1,"div",7),r(),m(15,D,2,1,"div",10),t(16,"button",11),s(17),r()(),t(18,"p",12),s(19," Vous n'avez pas de compte ? "),t(20,"a",13),s(21,"S'inscrire"),r()()()()),a&2&&(o(4),l("formGroup",e.loginForm),o(4),p("is-invalid",(e.username==null?null:e.username.invalid)&&((e.username==null?null:e.username.dirty)||(e.username==null?null:e.username.touched))),o(),l("ngIf",(e.username==null?null:e.username.invalid)&&((e.username==null?null:e.username.dirty)||(e.username==null?null:e.username.touched))),o(4),p("is-invalid",(e.password==null?null:e.password.invalid)&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.touched))),o(),l("ngIf",(e.password==null?null:e.password.invalid)&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.touched))),o(),l("ngIf",e.errorMessage),o(),l("disabled",e.loginForm.invalid||e.isLoading),o(),v(" ",e.isLoading?"Connexion en cours...":"Se connecter"," "))},dependencies:[S,w,P,M,b,E,I,F,N,y],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px}.w-100[_ngcontent-%COMP%]{width:100%}.is-invalid[_ngcontent-%COMP%]{border-color:var(--error-color)}"]})}}return i})();export{K as LoginComponent};
